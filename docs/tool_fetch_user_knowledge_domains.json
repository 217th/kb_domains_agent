{
  "name": "tool_fetch_user_knowledge_domains",
  "description": "SUMMARY: Retrieves a list of knowledge domains (interests) for a specific user from Google Firestore, with options to filter by status and toggle between brief or detailed views.\n\nLOGIC (ЛОГИКА РАБОТЫ):\n1. Validates the incoming `user_id`.\n2. Connects to the Google Firestore persistence layer.\n3. Queries the user's domain collection. If `status_filter` is provided (ACTIVE or INACTIVE), applies this filter.\n4. If the list is empty, returns a structured response indicating no domains exist.\n5. Maps the results based on `view_mode`:\n   - If 'BRIEF': Returns only ID, Name, and Status.\n   - If 'DETAILED': Additionally includes `domain_description` and `domain_keywords`.\n\nRETURN VALUE (ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ):\nReturns a JSON wrapper:\n{\n  \"status\": \"success\" | \"empty\",\n  \"data\": [\n    {\n      \"domain_id\": \"string\",\n      \"name\": \"string\",\n      \"status\": \"active\" | \"inactive\",\n      \"domain_description\": \"string (optional, only in DETAILED mode)\",\n      \"domain_keywords\": [\"string\"] (optional, only in DETAILED mode)\n    }\n  ]\n}\n\nERRORS (ВОЗМОЖНЫЕ ОШИБКИ):\n- \"FIRESTORE_UNAVAILABLE\": The database is not responding. Retry the request.\n- \"PERMISSION_DENIED\": System lacks rights to read this user's data. Report to admin.\n- \"INVALID_USER_ID\": The ID format is malformed.",
  "parameters": {
    "type": "object",
    "properties": {
      "user_id": {
        "type": "string",
        "description": "The unique identifier of the user (from AGENT_ROOT) whose domains need to be fetched."
      },
      "status_filter": {
        "type": "string",
        "enum": [
          "ALL",
          "ACTIVE",
          "INACTIVE"
        ],
        "default": "ALL",
        "description": "Filter to retrieve only 'ACTIVE' or 'INACTIVE' domains. Defaults to 'ALL'."
      },
      "view_mode": {
        "type": "string",
        "enum": [
          "BRIEF",
          "DETAILED"
        ],
        "default": "BRIEF",
        "description": "Determines the depth of information. 'BRIEF' returns lightweight metadata. 'DETAILED' includes descriptions and keywords."
      }
    },
    "required": [
      "user_id"
    ],
    "additionalProperties": false
  }
}