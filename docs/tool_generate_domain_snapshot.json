{
  "name": "tool_generate_domain_snapshot",
  "description": "SUMMARY: Generates a content snapshot for a specific knowledge domain by synthesizing facts from the Memory Bank into short and extended summaries.\n\nLOGIC (ЛОГИКА РАБОТЫ):\n1. Validates `user_id` and `domain_id`.\n2. Queries STORAGE_DOMAINS (Firestore) to retrieve the human-readable `domain_name`.\n3. Connects to the Memory Bank (Google ADK / VertexAiMemoryBankService) to fetch all recorded facts and fragments for this domain.\n4. Calculates metadata from raw facts: total count, total character length, and number of unique sources.\n5. Sends the retrieved facts to an external LLM to generate two outputs: a 'Super Summary' (~20 words) and an 'Extended Summary' (~150 words).\n6. Aggregates the name, summaries, and metadata into a final response.\n\nRETURN VALUE (ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ):\nReturns a JSON wrapper:\n{\n  \"status\": \"success\",\n  \"data\": {\n    \"domain_id\": \"string\",\n    \"domain_name\": \"string\",\n    \"super_summary\": \"string (approx 20 words)\",\n    \"extended_summary\": \"string (approx 150 words)\",\n    \"meta_info\": {\n      \"fact_count\": integer,\n      \"total_char_length\": integer,\n      \"source_count\": integer\n    }\n  }\n}\n\nERRORS (ВОЗМОЖНЫЕ ОШИБКИ):\n- \"STORAGE_UNAVAILABLE\": Firestore is unreachable; cannot fetch domain name.\n- \"MEMORY_BANK_UNAVAILABLE\": VertexAiMemoryBankService failed to return facts.\n- \"LLM_UNAVAILABLE\": The external model failed to generate the summaries.\n- \"DOMAIN_NOT_FOUND\": The specified domain ID does not exist in storage.",
  "parameters": {
    "type": "object",
    "properties": {
      "user_id": {
        "type": "string",
        "description": "The unique identifier of the user (must match the ID used in `fetch_user_knowledge_domains`)."
      },
      "domain_id": {
        "type": "string",
        "description": "The specific ID of the knowledge domain to analyze."
      }
    },
    "required": [
      "user_id",
      "domain_id"
    ],
    "additionalProperties": false
  }
}